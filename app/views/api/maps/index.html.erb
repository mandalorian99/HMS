<h1>Visualize Data</h1>

<!---table class="responsive nowrap table table-hover" id="dttb-api_maps" data-sort="true" data-source="<%= url_for(format: :json)%>">
  <thead>
    <tr>
      <th data-data="name">Name</th>
      <th data-data="lat">Lat</th>
      <th data-data="long">Long</th>
      <th data-data="url" data-orderable="false" data-class-name="all" data-searchable="false" class="skip-export" width="100px"></th>
    </tr>
  </thead>

</table-->

<br>

<div id="mapid"></div>

<script>
function fetch_data_from_api(){
  // using fetch api
  fetch('http://localhost:3000/api/maps.json').then(response => {
    return response.json() ;
  }).then(data => {
    console.log("access json data:")
    console.log(data[0] );
  });
}

var mymap = L.map('mapid').setView([22.7196,  75.8577], 13);
 //open stree map url -https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
 //mapbox map url : 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}'
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  	maxZoom: 21,
  	id: 'mapbox.streets',
  	accessToken: 'pk.eyJ1IjoibWFoZW5kcmFjaG91ZGhhcnkiLCJhIjoiY2pyOHdldHRkMDB0cTQ5bmt5ZmtmcGhkdCJ9.ELcQW-I7rlh75ZUF9sFChg'
}).addTo(mymap);

var marker = L.marker([22.7196, 75.8577]).addTo(mymap);

fetch_data_from_api();
</script>
<%#= link_to 'New Api Map', new_api_map_path %>